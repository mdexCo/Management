(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b24d92c"],{"048a":function(t,e,a){"use strict";a("8c93")},"396c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",[a("div",{staticClass:"main"},[a("div",{staticClass:"item",staticStyle:{"margin-right":"10px",width:"120px"}},[a("span",[t._v("网络：")]),a("el-select",{attrs:{placeholder:"网络"},model:{value:t.form.chain_id,callback:function(e){t.$set(t.form,"chain_id",e)},expression:"form.chain_id"}},[a("el-option",{attrs:{label:"全部网络",value:""}}),a("el-option",{attrs:{label:"Bsc",value:"56"}}),a("el-option",{attrs:{label:"Heco",value:"128"}})],1)],1),a("div",{staticClass:"item"},[a("span",[t._v("提交日期：")]),a("el-date-picker",{staticStyle:{"margin-right":"10px"},attrs:{type:"daterange",align:"left","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp"},model:{value:t.form.query_date,callback:function(e){t.$set(t.form,"query_date",e)},expression:"form.query_date"}})],1),a("div",{staticStyle:{"margin-right":"10px"}},[a("span",[t._v("发起人地址：")]),a("el-input",{attrs:{placeholder:"请输入地址"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),a("div",{staticClass:"item",staticStyle:{"margin-right":"10px",width:"120px"}},[a("span",[t._v("提案类型：")]),a("el-select",{model:{value:t.form.proposal_type,callback:function(e){t.$set(t.form,"proposal_type",e)},expression:"form.proposal_type"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),a("el-option",{attrs:{label:"社区提案",value:"1"}}),a("el-option",{attrs:{label:"董事提案",value:"2"}})],1)],1),a("div",{staticClass:"item",staticStyle:{"margin-right":"10px",width:"120px"}},[a("span",[t._v("提案状态：")]),a("el-select",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"待审核",value:"0"}}),a("el-option",{attrs:{label:"进行中",value:"1"}}),a("el-option",{attrs:{label:"已结束",value:"2"}}),a("el-option",{attrs:{label:"无效",value:"3"}})],1)],1),a("div",{staticStyle:{width:"250px",margin:"20px 10px 0 0"}},[a("el-input",{attrs:{placeholder:"输入提案名称"},model:{value:t.form.keywords,callback:function(e){t.$set(t.form,"keywords",e)},expression:"form.keywords"}})],1),a("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isloading,expression:"isloading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",fit:!0,"header-cell-style":t.getRowClass}},[t._l(t.suggestHead,(function(e,n){return a("el-table-column",{key:n,attrs:{align:"center",prop:e.value,label:e.label},scopedSlots:t._u([{key:"default",fn:function(e){return[["start_time","end_time"].includes(e.column.property)?a("span",[t._v(t._s(t.formatDate(e.row[e.column.property])))]):"proposal_type"==e.column.property?a("span",[t._v(t._s("1"==e.row[e.column.property]?"社区提案":"董事提案"))]):"status"==e.column.property?a("span",[t._v(t._s(t.Referendum(e.row[e.column.property])))]):a("span",[t._v(t._s(e.row[e.column.property]))])]}}],null,!0)})})),a("el-table-column",{attrs:{label:"支持/反对 的董事",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.support_count+"/"+e.row.refuse_count)+" ")]}}])}),a("el-table-column",{attrs:{label:"支持的董事",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return t.handleLook(e.row.directors)}}},[t._v("查看")]),a("br")]}}])}),a("el-table-column",{attrs:{label:"已添加语言",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.langs,(function(e,n){return a("p",{key:n},[t._v(t._s(e.lang_type))])}))}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return t.handleInfo(e.row.content,e.row.options,e.row.title)}}},[t._v("查看提案")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleLang(e.row.content,e.row.options,e.row.title,e.row.id,e.row.langs)}}},[t._v("多语言")]),1==e.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.row.id,3)}}},[t._v("下架")]):t._e(),0==e.row.status?a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return t.handleDelete(e.row.id,1)}}},[t._v("上架")]):t._e()]}}])})],2),a("el-dialog",{attrs:{title:"支持的董事",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-table",{attrs:{data:t.boradData}},t._l(t.borderHead,(function(e,n){return a("el-table-column",{key:n,attrs:{prop:e.value,label:e.label,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["support_status"==e.column.property?a("span",[t._v(t._s(1==e.row[e.column.property]?"支持":"反对"))]):a("span",[t._v(t._s(e.row[e.column.property]))])]}}],null,!0)})})),1)],1),a("el-pagination",{attrs:{align:"center","page-size":15,layout:"total, prev, pager, next",total:t.totalPage},on:{"current-change":t.handleCurrentChange}}),a("el-dialog",{attrs:{title:"提案",visible:t.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("p",{staticClass:"content"},[t._v("标题:")]),a("span",[t._v(t._s(t.title))]),a("p",{staticClass:"content"},[t._v("提案内容:")]),a("textarea",{attrs:{name:"",id:"",cols:"90",rows:"10"},domProps:{value:t.content}}),a("p",{staticClass:"content"},[t._v("提案选项:")]),a("ul",t._l(t.options,(function(e,n){return a("li",{key:n},[t._v(t._s(n+1+"."+e.content))])})),0)]),a("el-dialog",{attrs:{title:"多语言设置",visible:t.langDialogVisible,width:"60%","close-on-click-modal":!1,center:""},on:{"update:visible":function(e){t.langDialogVisible=e}}},[a("div",{staticClass:"main_dialog"},[a("div",{staticClass:"left"},[a("h2",{staticClass:"content"},[t._v("标题:")]),a("el-input",{model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),a("h2",{staticClass:"content"},[t._v("提案内容:")]),a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),a("h2",{staticClass:"content"},[t._v("提案选项:")]),a("ul",t._l(t.options,(function(e,n){return a("li",{key:n},[t._v(t._s(n+1+"."+e.content))])})),0)],1),a("div",{staticClass:"line"}),a("div",{staticClass:"right",staticStyle:{width:"50%"}},[a("h2",{staticClass:"content"},[t._v("语言类型:")]),a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.changLang(e)}},model:{value:t.lang,callback:function(e){t.lang=e},expression:"lang"}},[a("el-option",{attrs:{label:"中文",value:"zh-cn"}}),a("el-option",{attrs:{label:"英文",value:"en-us"}})],1),a("h2",{staticClass:"content"},[t._v("标题:")]),a("el-input",{model:{value:t.langTitle,callback:function(e){t.langTitle=e},expression:"langTitle"}}),a("h2",{staticClass:"content"},[t._v("提案内容:")]),a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:t.langContent,callback:function(e){t.langContent=e},expression:"langContent"}}),a("h2",{staticClass:"content"},[t._v("提案选项:")]),t._l(t.proposal_options,(function(e,n){return a("div",[t._v(" 提案"+t._s(n+1)+": "),a("el-input",{staticStyle:{"margin-top":"5px"},model:{value:e.content,callback:function(a){t.$set(e,"content",a)},expression:"item.content"}})],1)}))],2)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.langDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.langBtn}},[t._v("确 定")])],1)])],1)},l=[],o=a("5530"),i=a("1da1"),r=(a("d81d"),a("7db0"),a("c740"),a("96cf"),a("7885")),s=a("f3ce"),c=a("61f7"),u=a("5a0c"),p=a("0ecf"),d={name:"suggest",data:function(){return{boradData:[],borderHead:s["a"],dialogTableVisible:!1,centerDialogVisible:!1,langDialogVisible:!1,content:"",title:"",langTitle:"",langContent:"",langs:[],options:[],proposal_id:"",proposal_options:[],lang:"",tableData:[],totalPage:0,form:{chain_id:"",query_date:"",keywords:"",status:"",address:"",proposal_type:""},formatDate:c["d"],isloading:!1,suggestHead:s["c"]}},created:function(){this.proposal()},computed:{Referendum:function(){return function(t){return 1==t?"进行中":2==t?"已结束":0==t?"待审核":"无效"}}},methods:{init:function(){this.langTitle="",this.langContent=""},proposal:function(){var t=arguments,e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,l,i,s,c,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:1,u.extend(p),s=u(null===(n=e.form["query_date"])||void 0===n?void 0:n[0]).utc().format("YYYY-MM-DD HH:mm:ss"),c=u((null===(l=e.form["query_date"])||void 0===l?void 0:l[1])+86399999).utc().format("YYYY-MM-DD HH:mm:ss"),e.isloading=!0,a.next=7,Object(r["g"])(Object(o["a"])(Object(o["a"])({},e.form),{},{start_time:s,end_time:c,page:i}));case 7:d=a.sent,e.tableData=d.data.result.data,e.isloading=!1,e.totalPage=d.data.result.total;case 12:case"end":return a.stop()}}),a)})))()},getRowClass:function(t){var e=t.rowIndex;return 0==e?"background:RGB(238,239,246)":""},handleCurrentChange:function(t){this.proposal(t)},search:function(){this.proposal()},handleDelete:function(t,e){var a=this;this.$confirm("你确定".concat(1==e?"上架":"下架","吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(r["e"])({proposal_id:t,proposal_status:e});case 2:a.proposal();case 3:case"end":return n.stop()}}),n)}))))},handleInfo:function(t,e,a){this.centerDialogVisible=!0,this.content=t,this.options=e,this.title=a},handleLook:function(t){this.dialogTableVisible=!0,this.boradData=t},handleLang:function(t,e,a,n,l){var o,i,r;this.langDialogVisible=!0,this.content=t,this.options=e,this.title=a,this.proposal_id=n,this.langTitle=null===(o=l[0])||void 0===o?void 0:o.title,this.langContent=null===(i=l[0])||void 0===i?void 0:i.content,this.lang=null===(r=l[0])||void 0===r?void 0:r.lang_type,this.langs=l,0!==l.length?(this.proposal_options=l[0].proposal_options.map((function(t){return{content:JSON.parse(t).content,id:JSON.parse(t).id,proposal_id:JSON.parse(t).proposal_id}})),this.proposal_options):this.proposal_options=e.map((function(t){return{content:"",id:t.id,proposal_id:t.proposal_id}}))},langBtn:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.langDialogVisible=!1,a={proposal_id:t.proposal_id,title:t.langTitle,content:t.langContent,lang_type:t.lang,proposal_options:t.proposal_options},e.prev=2,e.next=5,Object(r["a"])(a);case 5:n=e.sent,0==n.data.code&&t.$message({message:"设置成功",type:"success"}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),t.$message({message:"设置内容不能为空",type:"warning"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()},changLang:function(t){var e=this.langs.find((function(e){return e.lang_type==t}));if(e){var a,n,l=this.langs.findIndex((function(e){return e.lang_type==t}));this.langTitle=null===(a=this.langs[l])||void 0===a?void 0:a.title,this.langContent=null===(n=this.langs[l])||void 0===n?void 0:n.content,this.proposal_options=this.langs[l].proposal_options.map((function(t){return{content:JSON.parse(t).content,id:JSON.parse(t).id,proposal_id:JSON.parse(t).proposal_id}}))}else this.init(),this.proposal_options=this.options.map((function(t){return{content:"",id:t.id,proposal_id:t.proposal_id}}))}}},f=d,v=(a("048a"),a("2877")),b=Object(v["a"])(f,n,l,!1,null,"d3dcbb72",null);e["default"]=b.exports},7885:function(t,e,a){"use strict";a.d(e,"f",(function(){return l})),a.d(e,"c",(function(){return o})),a.d(e,"d",(function(){return i})),a.d(e,"g",(function(){return r})),a.d(e,"h",(function(){return s})),a.d(e,"e",(function(){return c})),a.d(e,"b",(function(){return u})),a.d(e,"a",(function(){return p}));var n=a("b775"),l=function(t){return Object(n["a"])({url:"dao/list",method:"get",params:t})},o=function(t){return Object(n["a"])({url:"dao/apply",method:"post",params:t})},i=function(t){return Object(n["a"])({url:"dao/refuse",method:"post",params:t})},r=function(t){return Object(n["a"])({url:"dao/proposal/list",method:"get",params:t})},s=function(t){return Object(n["a"])({url:"dao/referendum/list",method:"get",params:t})},c=function(t){return Object(n["a"])({url:"dao/proposal/process",method:"post",params:t})},u=function(t){return Object(n["a"])({url:"dao/referendum/process",method:"post",params:t})},p=function(t){return Object(n["a"])({url:"dao/proposal/lang",method:"post",params:t})}},"7db0":function(t,e,a){"use strict";var n=a("23e7"),l=a("b727").find,o=a("44d2"),i="find",r=!0;i in[]&&Array(1)[i]((function(){r=!1})),n({target:"Array",proto:!0,forced:r},{find:function(t){return l(this,t,arguments.length>1?arguments[1]:void 0)}}),o(i)},"8c93":function(t,e,a){},c740:function(t,e,a){"use strict";var n=a("23e7"),l=a("b727").findIndex,o=a("44d2"),i="findIndex",r=!0;i in[]&&Array(1)[i]((function(){r=!1})),n({target:"Array",proto:!0,forced:r},{findIndex:function(t){return l(this,t,arguments.length>1?arguments[1]:void 0)}}),o(i)},d81d:function(t,e,a){"use strict";var n=a("23e7"),l=a("b727").map,o=a("1dde"),i=o("map");n({target:"Array",proto:!0,forced:!i},{map:function(t){return l(this,t,arguments.length>1?arguments[1]:void 0)}})},f3ce:function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"c",(function(){return l})),a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return i}));var n=[{label:"提案名称",value:"dao_name"},{label:"发起提案地址",value:"address"},{label:"申请时间",value:"created_at"},{label:"质押凭证数",value:"deposit_amount"},{label:"发起提案的区块高度",value:"block_number"},{label:"实时票数",value:"dao_votes"},{label:"30日均票数",value:"avg_votes"},{label:"是否为正式节点",value:"is_official"},{label:"董事状态",value:"status"}],l=[{label:"提案名称",value:"title"},{label:"发起人地址",value:"address"},{label:"heco快照高度",value:"heco_snap_block"},{label:"bsc快照高度",value:"bsc_snap_block"},{label:"提案状态",value:"status"},{label:"提案类型",value:"proposal_type"}],o=[{label:"提案名称",value:"title"},{label:"发起人地址",value:"address"},{label:"heco快照高度",value:"heco_snap_block"},{label:"bsc快照高度",value:"bsc_snap_block"},{label:"提案状态",value:"status"},{label:"执行状态",value:"proposal_tag"},{label:"提案类型",value:"proposal_type"},{label:"投票开始时间",value:"start_time"},{label:"投票结束时间",value:"end_time"}],i=[{label:"日期",value:"updated_at"},{label:"关联社区提案ID",value:"proposal_id"},{label:"董事地址",value:"dao_address"},{label:"董事名称",value:"dao_name"},{label:"支持状态",value:"support_status"}]}}]);